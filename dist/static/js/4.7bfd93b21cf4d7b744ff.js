webpackJsonp([4],{"+k0A":function(t,s){},"/pUr":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("4YfN"),a=e.n(i),n=e("/QXl"),c=e("bSIt"),r=e("o7co"),o={data:function(){return{onlyShowText:!1,selectType:2}},mounted:function(){var t=this;this.$store.dispatch("getShopRatings",function(){t.$nextTick(function(){new n.a(t.$refs.ratings,{click:!0,mouseWheel:!0})})})},computed:a()({},Object(c.d)(["info","ratings"]),Object(c.c)(["positiveSize"]),{filterRatings:function(){var t=this.ratings,s=this.onlyShowText,e=this.selectType;return t.filter(function(t){var i=t.rateType,a=t.text;return!(2!==e&&e!==i||s&&"用户未填写评价。"===a)})}}),methods:{toggleOnlyShowText:function(){this.onlyShowText=!this.onlyShowText},setSelectType:function(t){this.selectType=t}},components:{Star:r.a}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"ratings",staticClass:"ratings"},[e("div",{staticClass:"ratings-content"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-left"},[e("h1",{staticClass:"score"},[t._v(t._s(t.info.score))]),t._v(" "),e("div",{staticClass:"title"},[t._v("综合评分")]),t._v(" "),e("div",{staticClass:"rank"},[t._v("高于周边商家99%")])]),t._v(" "),e("div",{staticClass:"overview-right"},[e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("服务态度")]),t._v(" "),e("Star",{attrs:{size:36,score:t.info.serviceScore}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t.info.serviceScore))])],1),t._v(" "),e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("商品评分")]),t._v(" "),e("Star",{attrs:{size:36,score:t.info.foodScore}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(t.info.foodScore))])],1),t._v(" "),e("div",{staticClass:"delivery-wrapper"},[e("span",{staticClass:"title"},[t._v("送达时间")]),t._v(" "),e("span",{staticClass:"delivery"},[t._v(t._s(t.info.deliveryTime)+"分钟")])])])]),t._v(" "),e("div",{staticClass:"split"}),t._v(" "),e("div",{staticClass:"ratingselect"},[e("div",{staticClass:"rating-type border-1px"},[e("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(s){return t.setSelectType(2)}}},[t._v("\n          全部\n          "),e("span",{staticClass:"count"},[t._v(t._s(t.ratings.length))])]),t._v(" "),e("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(s){return t.setSelectType(0)}}},[t._v("\n          满意\n          "),e("span",{staticClass:"count"},[t._v(t._s(t.positiveSize))])]),t._v(" "),e("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(s){return t.setSelectType(1)}}},[t._v("\n          不满意\n          "),e("span",{staticClass:"count"},[t._v(t._s(t.ratings.length-t.positiveSize))])])]),t._v(" "),e("div",{staticClass:"switch",class:{on:t.onlyShowText},on:{click:t.toggleOnlyShowText}},[e("span",{staticClass:"iconfont icongou"}),t._v(" "),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])]),t._v(" "),e("div",{staticClass:"rating-wrapper"},[e("ul",t._l(t.filterRatings,function(s,i){return e("li",{key:i,staticClass:"rating-item"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"28",height:"28",src:s.avatar}})]),t._v(" "),e("div",{staticClass:"content"},[e("h1",{staticClass:"name"},[t._v(t._s(s.username))]),t._v(" "),e("div",{staticClass:"star-wrapper"},[e("Star",{attrs:{size:24,score:s.score}}),t._v(" "),e("span",{staticClass:"delivery"},[t._v(t._s(s.deliveryTime))])],1),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(s.text))]),t._v(" "),e("div",{staticClass:"recommend"},[e("span",{staticClass:"iconfont",class:0===s.rateType?"icontuijian":"iconshoushi-tucao"}),t._v(" "),t._l(s.recommend,function(s,i){return e("span",{key:i,staticClass:"item"},[t._v(t._s(s))])})],2),t._v(" "),e("div",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(s.rateTime)))])])])}),0)])])])},staticRenderFns:[]};var v=e("C7Lr")(o,l,!1,function(t){e("8bNC")},null,null);s.default=v.exports},"8bNC":function(t,s){},o7co:function(t,s,e){"use strict";var i={props:{score:Number,size:Number},computed:{startClasses:function(){for(var t=this.score,s=[],e=Math.floor(t),i=0;i<e;i++)s.push("on");for(10*t-10*e>=5&&s.push("half");s.length<5;)s.push("off");return s}}},a={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"star",class:"star-"+this.size},this._l(this.startClasses,function(t,e){return s("span",{key:e,staticClass:"star-item",class:t})}),0)},staticRenderFns:[]};var n=e("C7Lr")(i,a,!1,function(t){e("+k0A")},null,null);s.a=n.exports}});
//# sourceMappingURL=4.7bfd93b21cf4d7b744ff.js.map